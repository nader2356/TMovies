import{Q as x,r as k,G as R,a as e,H as F,m as L,J as d,j as a,S as T,M as j,T as m,ab as q,ac as D}from"./index.900ad18e.js";import{u as H}from"./App.ad8759f1.js";import{a as B,F as p,b as h,I as g}from"./useMutation.esm.9d45a7c1.js";import{B as f}from"./index.esm.25779644.js";import"./utils.esm.ed025ed9.js";const E=async n=>(await x.post("/users",n)).data,v={username:"",password:""},z=({setToken:n,setUserUsername:c})=>{const[o,u]=k.exports.useState(v),y=R(),i=H(),{mutate:C,isLoading:b}=B({mutationFn:E,onSuccess:()=>{n(null),c(null),i({title:"Account Created.",description:"We've created your account for you.",status:"success",duration:9e3,isClosable:!0,position:"top-left"}),y("/auth/login"),u(v)},onError:s=>{const t={title:"Something Wrong",status:"error",duration:9e3,isClosable:!0,position:"top-left"};if(s.response.data.error)return i({...t,description:s.response.data.error});i({...t,description:s.message})}}),S=s=>{s.preventDefault();const{username:t,password:r}=o;if(!t||!r)return alert("username or/and password are blank");C({username:t,password:r})},l=s=>{const t=s.target.name,r=s.target.value;u(w=>({...w,[t]:r}))};return e(F,{as:L.div,initial:{opacity:0},animate:{opacity:1},minH:"100vh",children:e("form",{onSubmit:S,children:e(d,{px:"1rem",py:"1.5rem",w:"23rem",children:a(T,{spacing:"1rem",children:[a(d,{pb:"1rem",children:[e(j,{as:"h2",size:"lg",children:"Here you can Register"}),e(m,{children:"Let's join us"})]}),a(p,{isRequired:!0,children:[e(h,{children:"Username"}),e(g,{name:"username",value:o.username,onChange:l,required:!0,autoFocus:!0})]}),a(p,{isRequired:!0,children:[e(h,{children:"Password"}),e(g,{name:"password",type:"password",value:o.password,onChange:l,required:!0})]}),e(f,{type:"submit",colorScheme:"linkedin",isLoading:b,loadingText:"registering...",children:"REGISTER"}),e(q,{}),a(m,{children:[e("span",{style:{opacity:"0.5"},children:"Don't have an account ?"})," ",e(f,{colorScheme:"linkedin",variant:"link",children:e(D,{to:"/auth/login",children:"Login"})})]})]})})})})};export{z as default};
