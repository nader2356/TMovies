import{c as pe,g as $e,o as fe,t as ze,a as t,f as S,e as N,h as b,C as je,m as _,r as a,k as ve,N as Le,ae as Ve,af as Ge,j as E,B as Ke,M as me,D as Ue,w as ge,ag as $,P as We,S as qe,Q as Je,aa as Xe,J as Ye,K as se,E as ae,ab as ie,T as le,ah as Ze,A as Qe}from"./index.900ad18e.js";import{f as eo,a as oo,b as ro,d as to,c as no,h as so,l as ao,i as W,I as io,T as lo,j as co}from"./movies.a2b6c193.js";import{m as B}from"./utils.esm.ed025ed9.js";import{u as uo}from"./useQuery.esm.d392ec48.js";function po(e){return"current"in e}var he=()=>typeof window<"u";function fo(){var o;const e=navigator.userAgentData;return(o=e==null?void 0:e.platform)!=null?o:navigator.platform}var vo=e=>he()&&e.test(navigator.vendor),mo=e=>he()&&e.test(fo()),go=()=>mo(/mac|iphone|ipad|ipod/i),ho=()=>go()&&vo(/apple/i);function yo(e){const{ref:o,elements:r,enabled:s}=e,i=()=>{var c;var l;return(c=(l=o.current)==null?void 0:l.ownerDocument)!=null?c:document};eo(i,"pointerdown",l=>{if(!ho()||!s)return;const c=l.target,P=(r!=null?r:[o]).some(u=>{const v=po(u)?u.current:u;return(v==null?void 0:v.contains(c))||v===c});i().activeElement!==c&&P&&(l.preventDefault(),c.focus())})}var z=(...e)=>e.filter(Boolean).join(" ");function Po(e,...o){return xo(e)?e(...o):e}var xo=e=>typeof e=="function";function g(...e){return function(r){e.some(s=>(s==null||s(r),r==null?void 0:r.defaultPrevented))}}function bo(...e){return function(r){e.forEach(s=>{s==null||s(r)})}}var[Co,R]=pe({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[wo,j]=pe({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `}),k={click:"click",hover:"hover"};function ko(e={}){const{closeOnBlur:o=!0,closeOnEsc:r=!0,initialFocusRef:s,id:i,returnFocusOnClose:l=!0,autoFocus:c=!0,arrowSize:f,arrowShadowColor:P,trigger:u=k.click,openDelay:v=200,closeDelay:C=200,isLazy:F,lazyBehavior:L="unmount",computePositionOnMount:we,...ke}=e,{isOpen:p,onClose:h,onOpen:V,onToggle:X}=oo(e),G=a.exports.useRef(null),A=a.exports.useRef(null),w=a.exports.useRef(null),T=a.exports.useRef(!1),Y=a.exports.useRef(!1);p&&(Y.current=!0);const[Z,Se]=a.exports.useState(!1),[Q,Re]=a.exports.useState(!1),Te=a.exports.useId(),Be=i!=null?i:Te,[ee,M,D,O]=["popover-trigger","popover-content","popover-header","popover-body"].map(n=>`${n}-${Be}`),{referenceRef:I,getArrowProps:Ee,getPopperProps:oe,getArrowInnerProps:_e,forceUpdate:Ne}=ro({...ke,enabled:p||!!we}),re=to({isOpen:p,ref:w});yo({enabled:p,ref:A}),no(w,{focusRef:A,visible:p,shouldFocus:l&&u===k.click}),so(w,{focusRef:s,visible:p,shouldFocus:c&&u===k.click});const te=ao({wasSelected:Y.current,enabled:F,mode:L,isSelected:re.present}),Fe=a.exports.useCallback((n={},m=null)=>{const d={...n,style:{...n.style,transformOrigin:W.transformOrigin.varRef,[W.arrowSize.var]:f?`${f}px`:void 0,[W.arrowShadowColor.var]:P},ref:B(w,m),children:te?n.children:null,id:M,tabIndex:-1,role:"dialog",onKeyDown:g(n.onKeyDown,y=>{r&&y.key==="Escape"&&h()}),onBlur:g(n.onBlur,y=>{const H=ce(y),U=q(w.current,H),He=q(A.current,H);p&&o&&(!U&&!He)&&h()}),"aria-labelledby":Z?D:void 0,"aria-describedby":Q?O:void 0};return u===k.hover&&(d.role="tooltip",d.onMouseEnter=g(n.onMouseEnter,()=>{T.current=!0}),d.onMouseLeave=g(n.onMouseLeave,y=>{y.nativeEvent.relatedTarget!==null&&(T.current=!1,setTimeout(()=>h(),C))})),d},[te,M,Z,D,Q,O,u,r,h,p,o,C,P,f]),Ae=a.exports.useCallback((n={},m=null)=>oe({...n,style:{visibility:p?"visible":"hidden",...n.style}},m),[p,oe]),Me=a.exports.useCallback((n,m=null)=>({...n,ref:B(m,G,I)}),[G,I]),x=a.exports.useRef(),K=a.exports.useRef(),ne=a.exports.useCallback(n=>{G.current==null&&I(n)},[I]),De=a.exports.useCallback((n={},m=null)=>{const d={...n,ref:B(A,m,ne),id:ee,"aria-haspopup":"dialog","aria-expanded":p,"aria-controls":M};return u===k.click&&(d.onClick=g(n.onClick,X)),u===k.hover&&(d.onFocus=g(n.onFocus,()=>{x.current===void 0&&V()}),d.onBlur=g(n.onBlur,y=>{const H=ce(y),U=!q(w.current,H);p&&o&&U&&h()}),d.onKeyDown=g(n.onKeyDown,y=>{y.key==="Escape"&&h()}),d.onMouseEnter=g(n.onMouseEnter,()=>{T.current=!0,x.current=window.setTimeout(()=>V(),v)}),d.onMouseLeave=g(n.onMouseLeave,()=>{T.current=!1,x.current&&(clearTimeout(x.current),x.current=void 0),K.current=window.setTimeout(()=>{T.current===!1&&h()},C)})),d},[ee,p,M,u,ne,X,V,o,h,v,C]);a.exports.useEffect(()=>()=>{x.current&&clearTimeout(x.current),K.current&&clearTimeout(K.current)},[]);const Oe=a.exports.useCallback((n={},m=null)=>({...n,id:D,ref:B(m,d=>{Se(!!d)})}),[D]),Ie=a.exports.useCallback((n={},m=null)=>({...n,id:O,ref:B(m,d=>{Re(!!d)})}),[O]);return{forceUpdate:Ne,isOpen:p,onAnimationComplete:re.onComplete,onClose:h,getAnchorProps:Me,getArrowProps:Ee,getArrowInnerProps:_e,getPopoverPositionerProps:Ae,getPopoverProps:Fe,getTriggerProps:De,getHeaderProps:Oe,getBodyProps:Ie}}function q(e,o){return e===o||(e==null?void 0:e.contains(o))}function ce(e){var r;const o=e.currentTarget.ownerDocument.activeElement;return(r=e.relatedTarget)!=null?r:o}function ye(e){const o=$e("Popover",e),{children:r,...s}=fe(e),i=ze(),l=ko({...s,direction:i.direction});return t(Co,{value:l,children:t(wo,{value:o,children:Po(r,{isOpen:l.isOpen,onClose:l.onClose,forceUpdate:l.forceUpdate})})})}ye.displayName="Popover";var Pe=S(function(o,r){const{getBodyProps:s}=R(),i=j();return N.createElement(b.div,{...s(o,r),className:z("chakra-popover__body",o.className),__css:i.body})});Pe.displayName="PopoverBody";var So=S(function(o,r){const{onClose:s}=R(),i=j();return t(je,{size:"sm",onClick:s,className:z("chakra-popover__close-btn",o.className),__css:i.closeButton,ref:r,...o})});So.displayName="PopoverCloseButton";function Ro(e){if(!!e)return{enter:{...e.enter,visibility:"visible"},exit:{...e.exit,transitionEnd:{visibility:"hidden"}}}}var To={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},Bo=b(_.section),xe=S(function(o,r){const{variants:s=To,...i}=o,{isOpen:l}=R();return N.createElement(Bo,{ref:r,variants:Ro(s),initial:!1,animate:l?"enter":"exit",...i})});xe.displayName="PopoverTransition";var be=S(function(o,r){const{rootProps:s,motionProps:i,...l}=o,{getPopoverProps:c,getPopoverPositionerProps:f,onAnimationComplete:P}=R(),u=j(),v={position:"relative",display:"flex",flexDirection:"column",...u.content};return N.createElement(b.div,{...f(s),__css:u.popper,className:"chakra-popover__popper"},t(xe,{...i,...c(l,r),onAnimationComplete:bo(P,l.onAnimationComplete),className:z("chakra-popover__content",o.className),__css:v}))});be.displayName="PopoverContent";var Eo=S(function(o,r){const{getHeaderProps:s}=R(),i=j();return N.createElement(b.header,{...s(o,r),className:z("chakra-popover__header",o.className),__css:i.header})});Eo.displayName="PopoverHeader";function Ce(e){const o=a.exports.Children.only(e.children),{getTriggerProps:r}=R();return a.exports.cloneElement(o,r(o.props,o.ref))}Ce.displayName="PopoverTrigger";function _o(e){const o=a.exports.useRef();return a.exports.useEffect(()=>{o.current=e},[e]),o.current}var No=(...e)=>e.filter(Boolean).join(" "),Fo=b("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),Ao=()=>{const e=a.exports.useRef(!0);return a.exports.useEffect(()=>{e.current=!1},[]),e.current},Mo=ve({from:{opacity:0},to:{opacity:1}}),ue="var(--skeleton-start-color)",de="var(--skeleton-end-color)",Do=ve({from:{borderColor:ue,background:ue},to:{borderColor:de,background:de}}),J=S((e,o)=>{const r=Le("Skeleton",e),s=Ao(),{startColor:i,endColor:l,isLoaded:c,fadeDuration:f,speed:P,className:u,...v}=fe(e),C=_o(c),F=No("chakra-skeleton",u);if(c){const L=s||C?"none":`${Mo} ${f}s`;return N.createElement(b.div,{ref:o,className:F,__css:{animation:L},...v})}return t(Fo,{ref:o,className:F,...v,__css:{...r,animation:`${P}s linear infinite alternate ${Do}`}})});J.defaultProps={fadeDuration:.4,speed:.8};J.displayName="Skeleton";const Oo=b(_.div,{shouldForwardProp:e=>Ve(e)||Ge(e)}),Io=({movie:e})=>E(Oo,{as:_.div,initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{duration:".5"},layout:!0,w:"full",pb:".5rem",px:".1rem",rounded:"md",borderBottomWidth:"2px",borderTopWidth:"1px",boxShadow:"md",children:[t(Ke,{ratio:2/3,children:t(io,{src:e.poster,alt:e.title,fallback:t(J,{}),rounded:"md"})}),t(me,{as:"h3",size:"md",textAlign:"center",py:"1rem",px:"1rem",style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:`${e.title[0].toUpperCase()}${e.title.slice(1)}`}),t(Ue,{px:".5rem",columns:{0:1,1:1,2:2}[e.genres.length]||3,spacing:3,textAlign:"center",children:e.genres.length>0?E(ge,{children:[e.genres.slice(0,2).map(o=>t(lo,{label:o.title,children:t($,{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",cursor:"default"},children:o.title})},o.id)),e.genres.length>2?E(ye,{children:[t(Ce,{children:t($,{as:"button",variant:"outline",cursor:"pointer",children:"more..."})}),t(We,{children:t(be,{w:"auto",children:t(Pe,{children:t(qe,{textAlign:"center",children:e.genres.slice(2).map(o=>t($,{children:o.title},o.id))})})})})]}):null]}):t($,{children:"no genres"})})]}),Ho=async e=>(await Je.get(`search/${e}`)).data,Go=({searchQuery:e})=>{const o=Xe().genre,{data:r,isSuccess:s,isLoading:i,isRefetching:l,isError:c}=uo({queryKey:["movies",o,e],queryFn:()=>e?Ho(e):co(o),refetchOnWindowFocus:!1});return E(Ye,{mb:"2rem",maxW:"90rem",mx:"auto",px:"2rem",children:[E(se,{justify:"space-between",align:"center",children:[t(me,{as:"h2",size:"lg",children:e||"Movies"}),l?t(ae,{size:"sm"}):null]}),t(ie,{my:"1rem"}),i?t(se,{w:"full",justify:"center",children:t(ae,{size:"xl"})}):null,c?t(le,{mx:"auto",children:"failed"}):null,s?t(Ze,{templateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gridAutoRows:"auto",w:"full",rowGap:"3rem",columnGap:"1rem",children:t(Qe,{children:r.length>0?t(ge,{children:r.map(f=>t(Io,{movie:f},f.id))}):t(le,{as:_.p,initial:{scale:0},animate:{scale:1,transition:{delay:.2,duration:.3}},textAlign:"center",children:"NO MOVIES FOUND"})})}):null,t(ie,{as:_.hr,layout:!0,my:"1rem"})]})};export{Go as default};
