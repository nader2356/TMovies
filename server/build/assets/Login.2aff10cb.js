import{Q as S,r as k,G as L,a as e,H as F,m as j,J as l,j as t,S as q,M as D,T as m,ab as H,ac as T}from"./index.900ad18e.js";import{u as B}from"./App.ad8759f1.js";import{a as I,F as p,b as h,I as g}from"./useMutation.esm.9d45a7c1.js";import{B as f}from"./index.esm.25779644.js";import"./utils.esm.ed025ed9.js";const R=async n=>(await S.post("/login",n)).data,b={username:"",password:""},z=({setToken:n,setUserUsername:c})=>{const[o,u]=k.exports.useState(b),v=L(),i=B(),{mutate:C,isLoading:w}=I({mutationFn:R,onSuccess:a=>{n(a.token),c(a.username),i({title:"Account Logged.",description:`Welcome back "${a.username}"`,status:"success",duration:9e3,isClosable:!0,position:"top-left"}),v("/"),u(b)},onError:a=>{const s={title:"Something Wrong",status:"error",duration:9e3,isClosable:!0,position:"top-left"};if(a.response.data.error)return i({...s,description:a.response.data.error});i({...s,description:a.message})}}),x=a=>{a.preventDefault();const{username:s,password:r}=o;if(!s||!r)return alert("username or/and password are blank");C({username:s,password:r})},d=a=>{const s=a.target.name,r=a.target.value;u(y=>({...y,[s]:r}))};return e(F,{as:j.div,initial:{opacity:0},animate:{opacity:1},minH:"100vh",children:e("form",{onSubmit:x,children:e(l,{px:"1rem",py:"1.5rem",w:"23rem",children:t(q,{spacing:"1rem",children:[t(l,{pb:"1rem",children:[e(D,{as:"h2",size:"lg",children:"Here you can Login"}),e(m,{children:"Let's join us"})]}),t(p,{isRequired:!0,children:[e(h,{children:"Username"}),e(g,{name:"username",value:o.username,onChange:d,required:!0,autoFocus:!0})]}),t(p,{isRequired:!0,children:[e(h,{children:"Password"}),e(g,{name:"password",type:"password",value:o.password,onChange:d,required:!0})]}),e(f,{type:"submit",colorScheme:"linkedin",isLoading:w,loadingText:"logging...",children:"LOGIN"}),e(H,{}),t(m,{children:[e("span",{style:{opacity:"0.5"},children:"Don't have an account ?"})," ",e(f,{colorScheme:"linkedin",variant:"link",children:e(T,{to:"/auth/register",children:"Register"})})]})]})})})})};export{z as default};
